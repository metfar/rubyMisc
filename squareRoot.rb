#!/usr/bin/ruby 
#
#  squareRoot.rb
#  
#  Copyright 2020 William Martinez Bas <metfar@gmail.com>
#  
#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.
#  
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#  
#  You should have received a copy of the GNU General Public License
#  along with this program; if not, write to the Free Software
#  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
#  MA 02110-1301, USA.
#  
#  

$LS=80; #limit steps

def squareRoot(n);
	high=n;
	low=0.0;
	step=0;
	
	while(step<$LS);
		tmp = (low+high)/2.0;
		tmpPow = tmp*tmp;
		step+=1;
		delta=high-low;
		print("---------------STEP:%d\n" % step);
		print("%.8f\t<\t√%.8f\t<\t%.8f\tΔ=%.8f\n" % [low,n,high,delta]);
		print("---------------\n");

		if(tmpPow == n || delta<0.000001); then
			return(tmp);
		elsif(tmpPow > n); then
			high = tmp;
		else;
			low = tmp;
		end;
	end;
	return(tmp);
end;


def main(*argv);
	if(argv[0].length<=0); then
		print("It requires at least one argument\n");
		return(1);
	end;
	begin;
		arg=argv[0][0].to_f;
	rescue;
		print("Argument "+argv[0]+" not valid!\n");
	end;
	print("√%d\t=\t%f\n" % [ arg, squareRoot(arg)] );

	return(0);
end;

if caller.length==0 then	#main file
	main(ARGV);
end;

"""
COMMAND LINE
============
$ ruby squareRoot.rb 2

OUTPUT
======

---------------STEP:1
0.00000000	<	√2.00000000	<	2.00000000	Δ=2.00000000
---------------
---------------STEP:2
1.00000000	<	√2.00000000	<	2.00000000	Δ=1.00000000
---------------
---------------STEP:3
1.00000000	<	√2.00000000	<	1.50000000	Δ=0.50000000
---------------
---------------STEP:4
1.25000000	<	√2.00000000	<	1.50000000	Δ=0.25000000
---------------
---------------STEP:5
1.37500000	<	√2.00000000	<	1.50000000	Δ=0.12500000
---------------
---------------STEP:6
1.37500000	<	√2.00000000	<	1.43750000	Δ=0.06250000
---------------
---------------STEP:7
1.40625000	<	√2.00000000	<	1.43750000	Δ=0.03125000
---------------
---------------STEP:8
1.40625000	<	√2.00000000	<	1.42187500	Δ=0.01562500
---------------
---------------STEP:9
1.41406250	<	√2.00000000	<	1.42187500	Δ=0.00781250
---------------
---------------STEP:10
1.41406250	<	√2.00000000	<	1.41796875	Δ=0.00390625
---------------
---------------STEP:11
1.41406250	<	√2.00000000	<	1.41601562	Δ=0.00195312
---------------
---------------STEP:12
1.41406250	<	√2.00000000	<	1.41503906	Δ=0.00097656
---------------
---------------STEP:13
1.41406250	<	√2.00000000	<	1.41455078	Δ=0.00048828
---------------
---------------STEP:14
1.41406250	<	√2.00000000	<	1.41430664	Δ=0.00024414
---------------
---------------STEP:15
1.41418457	<	√2.00000000	<	1.41430664	Δ=0.00012207
---------------
---------------STEP:16
1.41418457	<	√2.00000000	<	1.41424561	Δ=0.00006104
---------------
---------------STEP:17
1.41418457	<	√2.00000000	<	1.41421509	Δ=0.00003052
---------------
---------------STEP:18
1.41419983	<	√2.00000000	<	1.41421509	Δ=0.00001526
---------------
---------------STEP:19
1.41420746	<	√2.00000000	<	1.41421509	Δ=0.00000763
---------------
---------------STEP:20
1.41421127	<	√2.00000000	<	1.41421509	Δ=0.00000381
---------------
---------------STEP:21
1.41421318	<	√2.00000000	<	1.41421509	Δ=0.00000191
---------------
---------------STEP:22
1.41421318	<	√2.00000000	<	1.41421413	Δ=0.00000095
---------------
√2	=	1.414214

**********************************************************

COMMAND LINE
============
$ ruby squareRoot.rb 436

OUTPUT
======

---------------STEP:1
0.00000000	<	√436.00000000	<	436.00000000	Δ=436.00000000
---------------
---------------STEP:2
0.00000000	<	√436.00000000	<	218.00000000	Δ=218.00000000
---------------
---------------STEP:3
0.00000000	<	√436.00000000	<	109.00000000	Δ=109.00000000
---------------
---------------STEP:4
0.00000000	<	√436.00000000	<	54.50000000	Δ=54.50000000
---------------
---------------STEP:5
0.00000000	<	√436.00000000	<	27.25000000	Δ=27.25000000
---------------
---------------STEP:6
13.62500000	<	√436.00000000	<	27.25000000	Δ=13.62500000
---------------
---------------STEP:7
20.43750000	<	√436.00000000	<	27.25000000	Δ=6.81250000
---------------
---------------STEP:8
20.43750000	<	√436.00000000	<	23.84375000	Δ=3.40625000
---------------
---------------STEP:9
20.43750000	<	√436.00000000	<	22.14062500	Δ=1.70312500
---------------
---------------STEP:10
20.43750000	<	√436.00000000	<	21.28906250	Δ=0.85156250
---------------
---------------STEP:11
20.86328125	<	√436.00000000	<	21.28906250	Δ=0.42578125
---------------
---------------STEP:12
20.86328125	<	√436.00000000	<	21.07617188	Δ=0.21289062
---------------
---------------STEP:13
20.86328125	<	√436.00000000	<	20.96972656	Δ=0.10644531
---------------
---------------STEP:14
20.86328125	<	√436.00000000	<	20.91650391	Δ=0.05322266
---------------
---------------STEP:15
20.86328125	<	√436.00000000	<	20.88989258	Δ=0.02661133
---------------
---------------STEP:16
20.87658691	<	√436.00000000	<	20.88989258	Δ=0.01330566
---------------
---------------STEP:17
20.87658691	<	√436.00000000	<	20.88323975	Δ=0.00665283
---------------
---------------STEP:18
20.87991333	<	√436.00000000	<	20.88323975	Δ=0.00332642
---------------
---------------STEP:19
20.87991333	<	√436.00000000	<	20.88157654	Δ=0.00166321
---------------
---------------STEP:20
20.87991333	<	√436.00000000	<	20.88074493	Δ=0.00083160
---------------
---------------STEP:21
20.88032913	<	√436.00000000	<	20.88074493	Δ=0.00041580
---------------
---------------STEP:22
20.88053703	<	√436.00000000	<	20.88074493	Δ=0.00020790
---------------
---------------STEP:23
20.88053703	<	√436.00000000	<	20.88064098	Δ=0.00010395
---------------
---------------STEP:24
20.88058901	<	√436.00000000	<	20.88064098	Δ=0.00005198
---------------
---------------STEP:25
20.88058901	<	√436.00000000	<	20.88061500	Δ=0.00002599
---------------
---------------STEP:26
20.88060200	<	√436.00000000	<	20.88061500	Δ=0.00001299
---------------
---------------STEP:27
20.88060850	<	√436.00000000	<	20.88061500	Δ=0.00000650
---------------
---------------STEP:28
20.88061175	<	√436.00000000	<	20.88061500	Δ=0.00000325
---------------
---------------STEP:29
20.88061175	<	√436.00000000	<	20.88061337	Δ=0.00000162
---------------
---------------STEP:30
20.88061256	<	√436.00000000	<	20.88061337	Δ=0.00000081
---------------
√436	=	20.880613


"""
